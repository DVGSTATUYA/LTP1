{% extends "base.html" %}
{% block content %}
<h2>üì¶ –ü—Ä–æ–¥—É–∫—Ü–∏—è</h2>

<div style="margin-bottom:10px;">
  <a href="{{ url_for('add_product') }}" style="background:#355CBD; color:#fff; padding:8px 12px; border-radius:4px; text-decoration:none;">‚ûï –î–æ–±–∞–≤–∏—Ç—å</a>
</div>

{% set sorted_products = products|sort(attribute='id') %}
{% if not sorted_products %}
<p>–ù–µ—Ç –ø—Ä–æ–¥—É–∫—Ü–∏–∏.</p>
{% else %}
<table border="1" cellpadding="5" cellspacing="0" style="border-collapse:collapse; width:100%;">
  <tr style="background:#D2DFFF; color:#355CBD;">
    <th>ID</th><th>–¢–∏–ø</th><th>–ù–∞–∑–≤–∞–Ω–∏–µ</th><th>–ê—Ä—Ç–∏–∫—É–ª</th>
    <th>–¶–µ–Ω–∞</th><th>–ú–∞—Ç–µ—Ä–∏–∞–ª</th><th>–í—Ä–µ–º—è –ø—Ä-–≤–∞</th><th>–î–µ–π—Å—Ç–≤–∏—è</th>
  </tr>
  {% for p in sorted_products %}
  <tr>
    <td>{{ p.id }}</td>
    <td>{{ p.product_type }}</td>
    <td><a href="{{ url_for('edit_product', pid=p.id) }}" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">{{ p.product_name }}</a></td>
    <td>{{ p.article }}</td>
    <td>{{ "%.2f"|format(p.min_partner_cost) if p.min_partner_cost is not none else "" }}</td>
    <td>{{ p.main_material }}</td>
    <td>{{ p.manufacturing_time }}</td>
    <td style="white-space:nowrap;">
      <a href="{{ url_for('edit_product', pid=p.id) }}">‚úèÔ∏è</a>
      <a href="{{ url_for('delete_product', pid=p.id) }}" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç?');">üóëÔ∏è</a>
      <a href="{{ url_for('product_workshops', pid=p.id) }}" title="–¶–µ—Ö–∞ –ø—Ä–æ–¥—É–∫—Ç–∞">üè≠</a>
    </td>
  </tr>
  {% endfor %}
</table>
{% endif %}
{% endblock %}
